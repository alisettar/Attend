@model PaginatedResponse<AttendanceViewModel>

@{
    ViewData["Title"] = "Event Details";
    var evt = ViewBag.Event as EventViewModel;
}

<div class="d-flex justify-content-between align-items-center mb-4">
    <h2>@evt.Title</h2>
    <a asp-action="Index" class="btn btn-secondary">Back to Events</a>
</div>

<div class="card mb-4">
    <div class="card-body">
        <h5>Description</h5>
        <p>@evt.Description</p>
        <p class="text-muted">Date: @evt.Date.ToString("dd MMM yyyy HH:mm")</p>
    </div>
</div>

<h4>Attendees (@Model.TotalCount)</h4>

@if (Model.Items.Any())
{
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Name</th>
                <th>Status</th>
                <th>Checked In</th>
                <th>Check-in Time</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var attendance in Model.Items)
            {
                <tr>
                    <td>@attendance.UserName</td>
                    <td><span class="badge bg-@(attendance.Status == "CheckedIn" ? "success" : "secondary")">@attendance.Status</span></td>
                    <td>@(attendance.CheckedIn ? "Yes" : "No")</td>
                    <td>@(attendance.CheckedInAt?.ToString("dd MMM yyyy HH:mm") ?? "-")</td>
                </tr>
            }
        </tbody>
    </table>
}
else
{
    <p class="text-muted">No attendees yet.</p>
}
